<!DOCTYPE html>
<html>
<head>
    {% include '_fonts.html' %}

    {# Unfortunante hack because we're deploying this to staging and it can't compile a less file on demand #}
    <link rel="stylesheet" href="/css/app.less.css" />

    <!-- ugly includes because slide js is inlined and can't pickup the stuff from the base template -->
    <script src="/js/lib/d3.v3.min.js"></script>
    {{ JS.push('js/lib/modernizr.js') }}
    {{ JS.push('js/lib/jquery.js') }}
    {{ JS.push('js/lib/jquery.columnizer.js') }}
    {{ JS.render('js/preview-header.min.js') }}

    <style>
        .slide {
            display: block;
            background-color: #141D24;
        }
    </style>
</head>

<body>
    <div id="stack" class="stack" style="display: block;">
        {{ body|smarty }}
    </div>
    <div class="share-footer">
        <div class="share-title">
            {% include '_election_party.svg' %}
        </div>

        <div class="share-url">
            <h2>npr.org/election</h2>
        </div>
    </div>

    <script>
        var resizeSlide = function() {
            var $slide = $('.slide');
            var w = $(window).width();
            var h = $(window).height();

            $slide.width(w);
            $slide.height(h);

            $slide.find('.slide-content').width(w);
            $slide.find('.slide-content').height(h);
        }

        $(document).ready(function() {

            if (window.location.hash === '#share') {
                $('body').prepend('<link rel="stylesheet" href="/less/share-ui.less">');
            }
            else {
                resizeSlide();
                $(window).on('resize', resizeSlide);
            }

        })
    </script>
</body>
</html>
