<div class="results-wrapper hide-results {{ page_class }}">
    <div class="results-inner results-container">
        <div class="results-header">
            <h1>{{ page_title }}</h1>
            {% if bop %}
            <div class="leaderboard">
                <div class="results-header-group dem">
                    <h2 class="party">Dem</h2>
                    <p class="total"><span class="percentage">{{ bop.dem.has }}</span> <span class="change">{{ bop.dem.picked_up|signed }}</span></p>
                    <p class="seats-needed" colspan="2">Needs <span class="count">{{ bop.dem.needs }}</span></p>
                </div>
                <div class="results-header-group gop">
                    <h2 class="party">GOP</h2>
                    <p class="total"><span class="percentage">{{ bop.gop.has }}</span> <span class="change">{{ bop.gop.picked_up|signed }}</span></p>
                    <p class="seats-needed" colspan="2">Needs <span class="count">{{ bop.gop.needs }}</span></td>
                    </tr>
                </div>
                <div class="results-header-group other">
                    <h2 class="party">Other</h2>
                    <p class="total"><span class="percentage">{{ bop.other.has }}</span> <span class="change">{{ bop.other.picked_up|signed }}</span></p>
                </div>
                <div class="results-header-group not-called">
                    <h2>Not Called</h2>
                    <p class="total"><span class="count">{{ not_called }}</span></p>
                </div>
            </div>
            {% endif %}
        </div>

        <div class="results">
            {% for closing_time, races in poll_groups %}
            <h2 class="poll-closing-group"><span class="time">{{ closing_time|format_board_time }}</span></h2>
            {% include '_race_results_table.html' %}
            {% endfor %}
        </div>
    </div>
</div>

<script>

/*
* FlowType.JS v1.1
* Copyright 2013-2014, Simple Focus http://simplefocus.com/
*
* FlowType.JS by Simple Focus (http://simplefocus.com/)
* is licensed under the MIT License. Read a copy of the
* license in the LICENSE.txt file or at
* http://choosealicense.com/licenses/mit
*
* Thanks to Giovanni Difeterici (http://www.gdifeterici.com/)
*/
(function($) {
$.fn.flowtype = function(options) {
// Establish default settings/variables
// ====================================
var settings = $.extend({
maximum : 9999,
minimum : 1,
maxFont : 9999,
minFont : 1,
fontRatio : 35
}, options),
// Do the magic math
// =================
changes = function(el) {
var $el = $(el),
elw = $el.width(),
width = elw > settings.maximum ? settings.maximum : elw < settings.minimum ? settings.minimum : elw,
fontBase = width / settings.fontRatio,
fontSize = fontBase > settings.maxFont ? settings.maxFont : fontBase < settings.minFont ? settings.minFont : fontBase;
$el.css('font-size', fontSize + 'px');
};
// Make the magic visible
// ======================
return this.each(function() {
// Context for resize callback
var that = this;
// Make changes upon resize
$(window).resize(function(){changes(that);});
// Set changes on load
changes(this);
});
};
}(jQuery));

$("tr").flowtype({
 minFont : 8,
 maxFont : 25, 
 fontRatio: 75
});

/////////////////////////////////////////
var colOpts = {
  precise: true,
  columns: {{ column_number }},
}

// Columnizer needs a short pause or else it acts strangely on subsequent calls
setTimeout(function() {
  $('.results').columnize(colOpts);
  $('.results-wrapper').animate({ 'opacity': 1 }, 500, function() {
    $(this).removeClass('hide-results');
  });
}, 100);









</script>
